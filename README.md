# Gears that rotate

## Install from Github

``` sh
npm install --save git+https://git@github.com/ryanhinkel/gears.git
```

## Require

``` javascript
var gearRotate = require('gear_rotate')
```

## Use

``` javascript
var paths = [{
  id: 0
  d: pathObj
  center: [318.3545,347.38549999999987]
  ratio: 1/1
  color: {
    r: 255,
    b: 0,
    g: 0
  }
}]

var canvas = document.getElementById('canvas-id');
var ctx = canvas.getContext("2d");
var rotateFn = gearRotate(ctx, paths)
```

The function returned from gearRotate takes an _array_ of "parameters". The first item in that array is wired to the rotation of each gear around its own center point. So `rotateFn([0])` will draw the gear on the canvas in its original position, while `rotateFn([Math.PI])` will rotate the gear 180 degrees divided by the ratio. The canvas must be big enough to include the coordinates being drawn to. If translating from an SVG, the `viewbox` attribute is a good size to use.

For example, you might call `rotateFn` in a scroll event handler and pass `[document.body.scrollTop]` as the parameters array.


## Example pathObj

`op` maps to the letters used by SVG's `d` attribute to declare the type of operation. Currently, this module supports the following:
* M: Move To (1 coordinate pair)
* L: Line To (1 coordinate pair)
* C: Curve To (3 coordiate pairs)
* Z: Close Path (0 coordinate pairs)

See `lib/path_tools.js.coffee` for helper functions and `example/assets/gear_paths.js.coffee` for an example of some paths that have been pulled straight from an SVG `<path d="..."/>`


``` javascript
var center = [318.3545,347.38549999999987]
var pathObj = [
  {"op":"M", "coor":[[324.588,210.828]]},
  {"op":"C", "coor":[[320.435,210.638],[316.27500000000003,210.638],[312.12100000000004,210.828]]},
  {"op":"C", "coor":[[308.97,218.687],[306.97400000000005,226.83],[306.134,235.256]]},
  {"op":"C", "coor":[[302.50600000000003,235.652],[298.90000000000003,236.223],[295.32800000000003,236.968]]},
  {"op":"C", "coor":[[291.925,229.214],[287.51000000000005,222.08599999999998],[282.08500000000004,215.58499999999998]]},
  {"op":"C", "coor":[[278.076,216.688],[274.119,217.974],[270.22700000000003,219.43699999999998]]},
  {"op":"C", "coor":[[269.65900000000005,227.886],[270.27700000000004,236.24699999999999],[272.08200000000005,244.521]]},
  {"op":"C", "coor":[[268.7540000000001,246.018],[265.50100000000003,247.67499999999998],[262.33400000000006,249.488]]},
  {"op":"C", "coor":[[256.7010000000001,243.165],[250.30000000000007,237.75],[243.13100000000006,233.244]]},
  {"op":"C", "coor":[[239.65900000000005,235.532],[236.29400000000007,237.977],[233.04500000000004,240.572]]},
  {"op":"C", "coor":[[235.11500000000004,248.78300000000002],[238.28700000000003,256.544],[242.56000000000006,263.854]]},
  {"op":"C", "coor":[[239.85800000000006,266.306],[237.27600000000007,268.888],[234.82400000000007,271.591]]},
  {"op":"C", "coor":[[227.51300000000006,267.318],[219.75200000000007,264.146],[211.54100000000005,262.076]]},
  {"op":"C", "coor":[[208.94600000000005,265.324],[206.50100000000006,268.69],[204.21300000000005,272.16200000000003]]},
  {"op":"C", "coor":[[208.71900000000005,279.331],[214.13400000000004,285.732],[220.45700000000005,291.365]]},
  {"op":"C", "coor":[[218.64500000000004,294.532],[216.98700000000005,297.785],[215.49000000000004,301.113]]},
  {"op":"C", "coor":[[207.21700000000004,299.308],[198.85600000000005,298.69],[190.40700000000004,299.258]]},
  {"op":"C", "coor":[[188.94300000000004,303.15],[187.65700000000004,307.106],[186.55400000000003,311.115]]},
  {"op":"C", "coor":[[193.05500000000004,316.541],[200.18300000000002,320.956],[207.93700000000004,324.358]]},
  {"op":"C", "coor":[[207.19200000000004,327.931],[206.62100000000004,331.537],[206.22600000000003,335.164]]},
  {"op":"C", "coor":[[197.80000000000004,336.005],[189.65700000000004,338],[181.79700000000003,341.152]]},
  {"op":"C", "coor":[[181.60700000000003,345.305],[181.60700000000003,349.465],[181.79700000000003,353.61899999999997]]},
  {"op":"C", "coor":[[189.65700000000004,356.77],[197.8,358.76599999999996],[206.22600000000003,359.606]]},
  {"op":"C", "coor":[[206.62100000000004,363.234],[207.19200000000004,366.84],[207.93700000000004,370.412]]},
  {"op":"C", "coor":[[200.18300000000005,373.815],[193.05500000000004,378.22999999999996],[186.55400000000003,383.65599999999995]]},
  {"op":"C", "coor":[[187.65700000000004,387.66399999999993],[188.94300000000004,391.6209999999999],[190.40700000000004,395.5129999999999]]},
  {"op":"C", "coor":[[198.85600000000005,396.0809999999999],[207.21700000000004,395.4629999999999],[215.49000000000004,393.6579999999999]]},
  {"op":"C", "coor":[[216.98700000000005,396.9859999999999],[218.64500000000004,400.2389999999999],[220.45700000000005,403.4059999999999]]},
  {"op":"C", "coor":[[214.13400000000004,409.0389999999999],[208.71900000000005,415.4399999999999],[204.21300000000005,422.60899999999987]]},
  {"op":"C", "coor":[[206.50100000000006,426.08099999999985],[208.94600000000005,429.44599999999986],[211.54100000000005,432.6949999999999]]},
  {"op":"C", "coor":[[219.75200000000007,430.6249999999999],[227.51300000000006,427.45299999999986],[234.82400000000007,423.1799999999999]]},
  {"op":"C", "coor":[[237.27600000000007,425.8819999999999],[239.85800000000006,428.4639999999999],[242.56000000000006,430.9159999999999]]},
  {"op":"C", "coor":[[238.28700000000006,438.22699999999986],[235.11500000000007,445.9879999999999],[233.04500000000007,454.1989999999999]]},
  {"op":"C", "coor":[[236.29400000000007,456.7939999999999],[239.65900000000008,459.2389999999999],[243.13100000000009,461.5269999999999]]},
  {"op":"C", "coor":[[250.3000000000001,457.02099999999984],[256.7010000000001,451.6059999999999],[262.33400000000006,445.2829999999999]]},
  {"op":"C", "coor":[[265.50100000000003,447.0949999999999],[268.7540000000001,448.75299999999993],[272.08200000000005,450.2499999999999]]},
  {"op":"C", "coor":[[270.27700000000004,458.5229999999999],[269.65900000000005,466.8839999999999],[270.22700000000003,475.33299999999986]]},
  {"op":"C", "coor":[[274.119,476.79699999999985],[278.076,478.08299999999986],[282.08500000000004,479.18599999999986]]},
  {"op":"C", "coor":[[287.51000000000005,472.6849999999999],[291.925,465.55699999999985],[295.32800000000003,457.8029999999999]]},
  {"op":"C", "coor":[[298.90000000000003,458.5479999999999],[302.50600000000003,459.11899999999986],[306.134,459.5139999999999]]},
  {"op":"C", "coor":[[306.974,467.9409999999999],[308.97,476.0829999999999],[312.12100000000004,483.94299999999987]]},
  {"op":"C", "coor":[[316.27500000000003,484.13299999999987],[320.43500000000006,484.13299999999987],[324.588,483.94299999999987]]},
  {"op":"C", "coor":[[327.74,476.08299999999986],[329.735,467.94099999999986],[330.576,459.5139999999999]]},
  {"op":"C", "coor":[[334.20300000000003,459.1189999999999],[337.809,458.5479999999999],[341.382,457.8029999999999]]},
  {"op":"C", "coor":[[344.785,465.5569999999999],[349.199,472.6849999999999],[354.625,479.18599999999986]]},
  {"op":"C", "coor":[[358.634,478.08299999999986],[362.59,476.79699999999985],[366.48199999999997,475.33299999999986]]},
  {"op":"C", "coor":[[367.04999999999995,466.88399999999984],[366.43199999999996,458.52299999999985],[364.62699999999995,450.2499999999999]]},
  {"op":"C", "coor":[[367.9549999999999,448.7529999999999],[371.20799999999997,447.0949999999999],[374.37499999999994,445.2829999999999]]},
  {"op":"C", "coor":[[380.0079999999999,451.6059999999999],[386.40899999999993,457.0209999999999],[393.5779999999999,461.52699999999993]]},
  {"op":"C", "coor":[[397.0499999999999,459.2389999999999],[400.41599999999994,456.7939999999999],[403.66399999999993,454.19899999999996]]},
  {"op":"C", "coor":[[401.59399999999994,445.98799999999994],[398.4219999999999,438.227],[394.14899999999994,430.91599999999994]]},
  {"op":"C", "coor":[[396.8519999999999,428.46399999999994],[399.43399999999997,425.88199999999995],[401.88599999999997,423.17999999999995]]},
  {"op":"C", "coor":[[409.19599999999997,427.453],[416.957,430.62499999999994],[425.16799999999995,432.69499999999994]]},
  {"op":"C", "coor":[[427.763,429.4459999999999],[430.20799999999997,426.08099999999996],[432.4959999999999,422.6089999999999]]},
  {"op":"C", "coor":[[427.9899999999999,415.43999999999994],[422.57499999999993,409.03899999999993],[416.25199999999995,403.40599999999995]]},
  {"op":"C", "coor":[[418.06499999999994,400.239],[419.722,396.98599999999993],[421.21899999999994,393.65799999999996]]},
  {"op":"C", "coor":[[429.49299999999994,395.46299999999997],[437.8539999999999,396.08099999999996],[446.30299999999994,395.513]]},
  {"op":"C", "coor":[[447.76599999999996,391.621],[449.05199999999996,387.664],[450.1549999999999,383.65599999999995]]},
  {"op":"C", "coor":[[443.65399999999994,378.22999999999996],[436.5259999999999,373.81499999999994],[428.77199999999993,370.4119999999999]]},
  {"op":"C", "coor":[[429.51699999999994,366.8399999999999],[430.0879999999999,363.2339999999999],[430.4839999999999,359.60599999999994]]},
  {"op":"C", "coor":[[438.9099999999999,358.76599999999996],[447.05299999999994,356.7699999999999],[454.9119999999999,353.6189999999999]]},
  {"op":"C", "coor":[[455.1019999999999,349.4649999999999],[455.1019999999999,345.3049999999999],[454.9119999999999,341.15199999999993]]},
  {"op":"C", "coor":[[447.05299999999994,337.99999999999994],[438.9099999999999,336.00499999999994],[430.4839999999999,335.16399999999993]]},
  {"op":"C", "coor":[[430.0879999999999,331.5369999999999],[429.51699999999994,327.9309999999999],[428.77199999999993,324.35799999999995]]},
  {"op":"C", "coor":[[436.52599999999995,320.95599999999996],[443.65399999999994,316.54099999999994],[450.1549999999999,311.11499999999995]]},
  {"op":"C", "coor":[[449.0519999999999,307.10599999999994],[447.7659999999999,303.15],[446.30299999999994,299.2579999999999]]},
  {"op":"C", "coor":[[437.8539999999999,298.68999999999994],[429.49299999999994,299.30799999999994],[421.21899999999994,301.11299999999994]]},
  {"op":"C", "coor":[[419.7219999999999,297.78499999999997],[418.06499999999994,294.5319999999999],[416.25199999999995,291.36499999999995]]},
  {"op":"C", "coor":[[422.57499999999993,285.73199999999997],[427.98999999999995,279.33099999999996],[432.496,272.162]]},
  {"op":"C", "coor":[[430.20799999999997,268.69],[427.763,265.32399999999996],[425.168,262.07599999999996]]},
  {"op":"C", "coor":[[416.957,264.14599999999996],[409.196,267.318],[401.886,271.59099999999995]]},
  {"op":"C", "coor":[[399.434,268.888],[396.85200000000003,266.3059999999999],[394.149,263.8539999999999]]},
  {"op":"C", "coor":[[398.422,256.5439999999999],[401.594,248.78299999999993],[403.664,240.57199999999992]]},
  {"op":"C", "coor":[[400.416,237.97699999999992],[397.05,235.53199999999993],[393.578,233.24399999999991]]},
  {"op":"C", "coor":[[386.409,237.74999999999991],[380.008,243.1649999999999],[374.375,249.48799999999991]]},
  {"op":"C", "coor":[[371.208,247.67499999999993],[367.955,246.01799999999992],[364.627,244.5209999999999]]},
  {"op":"C", "coor":[[366.432,236.2469999999999],[367.05,227.8859999999999],[366.482,219.4369999999999]]},
  {"op":"C", "coor":[[362.59000000000003,217.9739999999999],[358.634,216.6879999999999],[354.625,215.5849999999999]]},
  {"op":"C", "coor":[[349.199,222.0859999999999],[344.785,229.21399999999988],[341.382,236.9679999999999]]},
  {"op":"C", "coor":[[337.809,236.2229999999999],[334.20300000000003,235.6519999999999],[330.576,235.25599999999991]]},
  {"op":"C", "coor":[[329.735,226.82999999999993],[327.74,218.68699999999993],[324.588,210.82799999999992]]},
  {"op":"M", "coor":[[286.768,370.79]]},
  {"op":"L", "coor":[[223.01999999999998,370.79]]},
  {"op":"C", "coor":[[233.528,413.675],[272.25,445.533],[318.35499999999996,445.533]]},
  {"op":"C", "coor":[[337.90799999999996,445.533],[356.13399999999996,439.802],[371.443,429.93]]},
  {"op":"L", "coor":[[341.943,378.83500000000004]]},
  {"op":"C", "coor":[[335.37,383.77500000000003],[327.202,386.70300000000003],[318.35499999999996,386.70300000000003]]},
  {"op":"C", "coor":[[305.41999999999996,386.70300000000003],[293.93499999999995,380.44300000000004],[286.768,370.79]]},
  {"op":"M", "coor":[[362.887,259.914]]},
  {"op":"L", "coor":[[333.369,311.041]]},
  {"op":"C", "coor":[[347.629,316.944],[357.672,331.001],[357.672,347.385]]},
  {"op":"C", "coor":[[357.672,353.364],[356.33500000000004,359.033],[353.94300000000004,364.109]]},
  {"op":"L", "coor":[[385.56600000000003,418.882]]},
  {"op":"C", "coor":[[404.60600000000005,400.976],[416.502,375.559],[416.502,347.385]]},
  {"op":"C", "coor":[[416.502,309.24399999999997],[394.699,276.156],[362.887,259.914]]},
  {"op":"M", "coor":[[318.355,338.841]]},
  {"op":"C", "coor":[[323.07,338.841],[326.899,342.67],[326.899,347.385]]},
  {"op":"C", "coor":[[326.899,352.101],[323.07,355.929],[318.355,355.929]]},
  {"op":"C", "coor":[[313.639,355.929],[309.81100000000004,352.101],[309.81100000000004,347.385]]},
  {"op":"C", "coor":[[309.81100000000004,342.67],[313.639,338.841],[318.355,338.841]]},
  {"op":"M", "coor":[[346.227,253.259]]},
  {"op":"C", "coor":[[337.39,250.64299999999997],[328.03499999999997,249.238],[318.35499999999996,249.238]]},
  {"op":"C", "coor":[[264.186,249.238],[220.20699999999997,293.216],[220.20699999999997,347.385]]},
  {"op":"C", "coor":[[220.20699999999997,349.282],[220.26099999999997,351.16499999999996],[220.36799999999997,353.03499999999997]]},
  {"op":"L", "coor":[[279.441,353.03499999999997]]},
  {"op":"C", "coor":[[279.17499999999995,351.18999999999994],[279.037,349.304],[279.037,347.385]]},
  {"op":"C", "coor":[[279.037,326.995],[294.592,310.209],[314.474,308.257]]},
  {"op":"L", "coor":[[346.227,253.25900000000001]]}
]
```
